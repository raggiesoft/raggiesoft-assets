/* /assets/stardust-engine/css/theme-crucible.css */
/* Theme: The Crucible (Homecoming / Maroon & Orange) */
/* v2.2 - Full Light & Dark Mode Support (WCAG AAA) */

/* --- 1. UNIVERSAL BRAND PALETTE (Shared) --- */
:root {
  /* --- Core Palette: "The Forgers" (CPI / Virginia Tech Inspired) --- */
  
  /* School Maroon (Deep, rich, dark) */
  --color-cpi-maroon-dark: #3F001D;  /* Backgrounds */
  --color-cpi-maroon: #630031;       /* Primary brand color */
  --color-cpi-maroon-light: #8A1F4D; /* Hover states */

  /* School Orange (Burnt, athletic, high-vis) */
  --color-cpi-orange: #E87722;       /* Primary accent */
  --color-cpi-orange-light: #FF9E5E; /* Text/Links on dark */
  --color-cpi-orange-dark: #BA4C00;  /* Hover/Text on light */
  --color-cpi-orange-burnt: #993300; /* High Contrast Text */

  /* Stadium Neutrals */
  --color-stadium-white: #F8F9FA;    /* Text on Maroon */
  --color-stadium-grey: #E9ECEF;     /* Secondary Text */
  --color-stadium-concrete: #212529; /* Text on White */

  /* Gradients */
  --gradient-primary: linear-gradient(90deg, var(--color-cpi-maroon) 0%, var(--color-cpi-orange) 100%);
}

/* --- 2. LIGHT MODE DEFAULTS ("The Tailgate") --- */
:root {
  /* Backgrounds */
  --bs-body-bg: #FFFFFF;
  --bs-body-color: var(--color-stadium-concrete);
  
  --bs-secondary-color: #495057;
  --bs-border-color: #DEE2E6;
  
  /* Components */
  --bs-tertiary-bg: #F8F9FA;       /* Sidebar/Footer */
  --bs-card-bg: #FFFFFF;
  --bs-card-color: var(--color-stadium-concrete);
  
  /* Brand Mapping */
  --bs-primary: var(--color-cpi-maroon);
  --bs-warning: var(--color-cpi-orange);
  --bs-info: #004085; /* Deep Blue for readability */
  
  /* Links */
  --bs-link-color: var(--color-cpi-maroon);
  --bs-link-hover-color: var(--color-cpi-orange-dark);
  
  /* Modals */
  --bs-modal-bg: #FFFFFF;
  --bs-modal-color: var(--color-stadium-concrete);
  --bs-modal-border-color: #DEE2E6;

  /* Alerts */
  --bs-warning-bg-subtle: #FFF3CD;
  --bs-warning-border-subtle: #FFE69C;
  --bs-warning-text-emphasis: #664D03;
  
  --bs-navbar-brand-color: var(--color-cpi-maroon);
}

/* FIX: Text Utilities in Light Mode */
.text-light { color: var(--color-stadium-concrete) !important; } /* Invert for visibility */
.text-body { color: var(--color-stadium-concrete) !important; }
.text-muted { color: #6c757d !important; }

/* FIX: Utility Contrast in Light Mode */
.text-warning { color: var(--color-cpi-orange-dark) !important; }
.border-warning { border-color: var(--color-cpi-orange) !important; }
.text-primary { color: var(--color-cpi-maroon) !important; }
.text-info { color: #004085 !important; }

/* FIX: Button Colors in Light Mode */
.btn-primary {
    background-color: var(--color-cpi-maroon);
    border-color: var(--color-cpi-maroon);
    color: #FFFFFF !important; /* White text on Maroon is safe */
}
.btn-primary:hover {
    background-color: var(--color-cpi-maroon-light);
    border-color: var(--color-cpi-maroon-light);
}
/* In Light Mode, Outline Info buttons need to be dark enough */
.btn-outline-info {
    color: var(--color-cpi-maroon) !important;
    border-color: var(--color-cpi-maroon) !important;
}
.btn-outline-info:hover {
    background-color: var(--color-cpi-maroon) !important;
    color: #FFFFFF !important;
}


/* --- 3. DARK MODE OVERRIDES ("Night Game") --- */
@media (prefers-color-scheme: dark) {
  :root {
    /* Base Colors - Immersion */
    --bs-body-bg: #1A050D;           /* Extremely dark maroon-black */
    --bs-body-color: var(--color-stadium-white);
    
    --bs-secondary-color: var(--color-stadium-grey);
    --bs-border-color: var(--color-cpi-maroon);
    
    /* Components */
    --bs-tertiary-bg: var(--color-cpi-maroon-dark);
    --bs-card-bg: var(--color-cpi-maroon-dark);
    --bs-card-color: var(--color-stadium-white);
    --bs-card-border-color: var(--color-cpi-maroon);

    /* Brands - Orange pops on dark */
    --bs-primary: var(--color-cpi-orange); 
    
    /* Links */
    --bs-link-color: var(--color-cpi-orange-light);
    --bs-link-hover-color: #FFFFFF;

    /* Modals */
    --bs-modal-bg: var(--color-cpi-maroon-dark);
    --bs-modal-color: var(--color-stadium-white);
    --bs-modal-border-color: var(--color-cpi-maroon);
    --bs-modal-header-border-color: var(--color-cpi-maroon);
    --bs-modal-footer-border-color: var(--color-cpi-maroon);

    /* Alerts */
    --bs-warning-bg-subtle: #3D1000; /* Deep Maroon/Brown */
    --bs-warning-border-subtle: var(--color-cpi-orange);
    --bs-warning-text-emphasis: var(--color-cpi-orange-light);
  }

  /* FIX: Text Utilities in Dark Mode */
  .text-light { color: var(--color-stadium-white) !important; }
  .text-body { color: var(--color-stadium-white) !important; }
  .text-muted { color: var(--color-stadium-grey) !important; }

  /* FIX: Utility Contrast in Dark Mode */
  .text-warning { color: var(--color-cpi-orange) !important; }
  .border-warning { border-color: var(--color-cpi-orange) !important; }
  .text-primary { color: var(--color-cpi-orange-light) !important; }
  .text-info { color: var(--color-cpi-orange-light) !important; } 

  /* FIX: Button Colors in Dark Mode */
  .btn-primary {
      background-color: var(--color-cpi-orange);
      border-color: var(--color-cpi-orange);
      color: #000000 !important; /* Black text on Orange for AA contrast */
  }
  .btn-primary:hover {
      background-color: var(--color-cpi-orange-light);
      border-color: var(--color-cpi-orange-light);
  }
  
  /* Override Outline Info to match the orange theme in dark mode */
  .btn-outline-info {
      color: var(--color-cpi-orange-light) !important;
      border-color: var(--color-cpi-orange) !important;
  }
  .btn-outline-info:hover {
      background-color: var(--color-cpi-orange) !important;
      color: #000000 !important;
  }

  /* Alert Fixes */
  .alert-dark {
      background-color: #25030F !important; 
      border-color: var(--color-cpi-maroon) !important;
      color: var(--color-stadium-white) !important;
  }
  .alert-warning {
      background-color: #3D1000;
      border-color: var(--color-cpi-orange);
      color: var(--color-stadium-white);
  }
  
  /* General Fixes */
  .btn-close { filter: invert(1) grayscale(100%) brightness(200%); }
  .bg-body-tertiary .nav-link { color: var(--color-stadium-grey) !important; }
  .bg-body-tertiary .nav-link:hover { color: var(--color-cpi-orange) !important; }

  /* Sidebar Link Overrides (Dark Mode) */
  .nav-link.link-warning {
      color: var(--color-cpi-orange) !important; 
  }
  .nav-link.link-warning:hover {
      color: #ffc080 !important;
      text-shadow: 0 0 8px var(--color-cpi-orange);
      background-color: rgba(232, 119, 34, 0.1);
  }
  .nav-link.link-cancelled {
      color: #ff4d6a !important; 
      text-decoration: line-through;
      opacity: 0.6;
  }
}


/* --- 4. GLOBAL TYPOGRAPHY & LAYOUT --- */
body {
    font-family: "Courier New", Courier, monospace; /* Narrative font for this theme */
}
h1, h2, h3, h4, h5, h6 {
    font-family: "Impact", "Arial Black", sans-serif;
    text-transform: uppercase;
}

/* --- 5. COMPONENT STYLES --- */

/* Custom Gradients */
.text-glow-primary {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));
}

/* Cards */
.card {
    border-width: 2px;
}

/* Footer */
footer {
    background-color: var(--bs-tertiary-bg);
    border-top: 1px solid var(--bs-border-color);
    padding-top: 2rem;
    padding-bottom: 2rem;
    margin-top: auto;
}

/* Navbar Override for This Theme Only */
body .navbar {
    border-bottom-color: var(--color-cpi-orange) !important;
}
body .navbar-brand, body .nav-link {
    color: var(--color-stadium-white) !important;
}
body .nav-link:hover {
    color: var(--color-cpi-orange) !important;
}
/* Navbar Toggler: Always Light because header is always dark */
.navbar-toggler .hamburger-bar {
    background-color: var(--color-stadium-white) !important;
}


/* --- 6. CRITICAL UTILITY OVERRIDES (Fixing Nested Contrast) --- */

/* FIX: When .text-light is used inside .bg-dark (like in dropdowns)
   it MUST be light, even if we are in Light Mode (where we usually invert it). */
.bg-dark .text-light,
.dropdown-menu.bg-dark .dropdown-item.text-light {
    color: var(--color-stadium-white) !important;
}

/* Sidebar Links (Light Mode Base) */
.nav-link.link-warning { 
    color: var(--color-cpi-orange-dark) !important; 
}
.nav-link.link-cancelled {
    color: #cc3d53 !important; /* Dark Red */
    text-decoration: line-through;
    opacity: 0.75;
}